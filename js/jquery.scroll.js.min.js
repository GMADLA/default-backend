/*
jquery scroll - a custom stylable scrollbar
Version 0.4
https://github.com/thomd/jquery-scroll
Copyright (c) 2011 Thomas Duerr (me-at-thomd-dot-net)
Licensed under the MIT license (https://raw.github.com/thomd/jquery-scroll/master/MIT-LICENSE)
*/
(function(c,a){var b={init:function(e,f){var d=c.extend({},c.fn.scrollbar.defaults,f);return this.each(function(){var g=c(this),h={arrows:d.arrows};if(d.containerHeight!="auto"){g.height(d.containerHeight)}h.containerHeight=g.height();h.contentHeight=c.fn.scrollbar.contentHeight(g);if(h.contentHeight<=h.containerHeight){return true}this.scrollbar=new c.fn.scrollbar.Scrollbar(g,h,d);this.scrollbar.buildHtml().setHandle().appendEvents();if(typeof e==="function"){e(g.find(".scrollbar-pane"),this.scrollbar)}})},repaint:function(){return this.each(function(){if(this.scrollbar){this.scrollbar.repaint()}})},scrollto:function(d){return this.each(function(){this.scrollbar.scrollto(d)})},unscrollbar:function(){return this.each(function(){if(this.scrollbar){this.scrollbar.unscrollbar()}})}};c.fn.scrollbar=function(d){if(b[d]){return b[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="function"||d===undefined){return b.init.apply(this,arguments)}else{if(typeof d==="object"){return b.init.apply(this,[null,d])}else{c.error("method '"+d+"' does not exist for $.fn.scrollbar")}}}};c.fn.scrollbar.defaults={containerHeight:"auto",arrows:true,handleHeight:"auto",handleMinHeight:30,scrollTimeout:50,scrollStep:20,scrollTimeoutArrows:40,scrollStepArrows:3};c.fn.scrollbar.Scrollbar=function(d,f,e){this.container=d;this.props=f;this.opts=e;this.mouse={};this.props.arrows=this.container.hasClass("no-arrows")?false:this.props.arrows};c.fn.scrollbar.Scrollbar.prototype={buildHtml:function(){this.container.wrapInner('<div class="scrollbar-pane"/>');this.container.append('<div class="scrollbar-handle-container"><div class="scrollbar-handle"/></div>');if(this.props.arrows){this.container.append('<div class="scrollbar-handle-up"/>').append('<div class="scrollbar-handle-down"/>')}var d=this.container.height();this.pane=this.container.find(".scrollbar-pane");this.handle=this.container.find(".scrollbar-handle");this.handleContainer=this.container.find(".scrollbar-handle-container");this.handleArrows=this.container.find(".scrollbar-handle-up, .scrollbar-handle-down");this.handleArrowUp=this.container.find(".scrollbar-handle-up");this.handleArrowDown=this.container.find(".scrollbar-handle-down");this.pane.defaultCss({top:0,left:0});this.handleContainer.defaultCss({right:0});this.handle.defaultCss({top:0,right:0});this.handleArrows.defaultCss({right:0});this.handleArrowUp.defaultCss({top:0});this.handleArrowDown.defaultCss({bottom:0});this.container.css({position:this.container.css("position")==="absolute"?"absolute":"relative",overflow:"hidden",height:d});this.pane.css({position:"absolute",overflow:"visible",height:"auto"});this.handleContainer.css({position:"absolute",top:this.handleArrowUp.outerHeight(true),height:(this.props.containerHeight-this.handleArrowUp.outerHeight(true)-this.handleArrowDown.outerHeight(true))+"px"});this.handle.css({position:"absolute",cursor:"pointer"});this.handleArrows.css({position:"absolute",cursor:"pointer"});this.pane.top=0;return this},setHandle:function(){this.props.handleContainerHeight=this.handleContainer.height();this.props.contentHeight=this.pane.height();this.props.handleHeight=this.opts.handleHeight=="auto"?Math.max(Math.ceil(this.props.containerHeight*this.props.handleContainerHeight/this.props.contentHeight),this.opts.handleMinHeight):this.opts.handleHeight;this.handle.height(this.props.handleHeight);this.handle.height(2*this.handle.height()-this.handle.outerHeight(true));this.props.handlePosition={min:0,max:this.props.handleContainerHeight-this.props.handleHeight};this.props.handleContentRatio=(this.props.contentHeight-this.props.containerHeight)/(this.props.handleContainerHeight-this.props.handleHeight);if(this.handle.top==undefined){this.handle.top=0}else{this.handle.top=-1*this.pane.top/this.props.handleContentRatio}return this},appendEvents:function(){this.handle.bind("mousedown.handle",c.proxy(this,"startOfHandleMove"));this.handleContainer.bind("mousedown.handle",c.proxy(this,"onHandleContainerMousedown"));this.handleContainer.bind("mouseenter.container mouseleave.container",c.proxy(this,"onHandleContainerHover"));this.handleArrows.bind("mousedown.arrows",c.proxy(this,"onArrowsMousedown"));this.container.bind("mousewheel.container",c.proxy(this,"onMouseWheel"));this.container.bind("mouseenter.container mouseleave.container",c.proxy(this,"onContentHover"));this.handle.bind("click.scrollbar",this.preventClickBubbling);this.handleContainer.bind("click.scrollbar",this.preventClickBubbling);this.handleArrows.bind("click.scrollbar",this.preventClickBubbling);return this},mousePosition:function(d){return d.pageY||(d.clientY+(a.documentElement.scrollTop||a.body.scrollTop))||0},repaint:function(){this.setHandle();this.setHandlePosition()},scrollto:function(e){var d=0;if(typeof e=="number"){d=(e<0?0:e)/this.props.handleContentRatio}else{if(typeof e=="string"){if(e=="bottom"){d=this.props.handlePosition.max}if(e=="middle"){d=Math.ceil(this.props.handlePosition.max/2)}}else{if(typeof e=="object"&&!c.isPlainObject(e)){d=Math.ceil(e.position().top/this.props.handleContentRatio)}}}this.handle.top=d;this.setHandlePosition();this.setContentPosition()},unscrollbar:function(){var d=this.container.find(".scrollbar-pane").find("*");this.container.empty();this.container.append(d);this.container.attr("style","")},startOfHandleMove:function(d){d.preventDefault();d.stopPropagation();this.mouse.start=this.mousePosition(d);this.handle.start=this.handle.top;c(a).bind("mousemove.handle",c.proxy(this,"onHandleMove")).bind("mouseup.handle",c.proxy(this,"endOfHandleMove"));this.handle.addClass("move");this.handleContainer.addClass("move")},onHandleMove:function(d){d.preventDefault();var e=this.mousePosition(d)-this.mouse.start;this.handle.top=this.handle.start+e;this.setHandlePosition();this.setContentPosition()},endOfHandleMove:function(d){c(a).unbind(".handle");this.handle.removeClass("move");this.handleContainer.removeClass("move")},setHandlePosition:function(){this.handle.top=(this.handle.top>this.props.handlePosition.max)?this.props.handlePosition.max:this.handle.top;this.handle.top=(this.handle.top<this.props.handlePosition.min)?this.props.handlePosition.min:this.handle.top;this.handle[0].style.top=this.handle.top+"px"},setContentPosition:function(){this.pane.top=-1*this.props.handleContentRatio*this.handle.top;this.pane[0].style.top=this.pane.top+"px"},onMouseWheel:function(d,e){this.handle.top-=e;this.setHandlePosition();this.setContentPosition();if(this.handle.top>this.props.handlePosition.min&&this.handle.top<this.props.handlePosition.max){d.preventDefault()}},onHandleContainerMousedown:function(e){e.preventDefault();if(!c(e.target).hasClass("scrollbar-handle-container")){return false}this.handle.direction=(this.handle.offset().top<this.mousePosition(e))?1:-1;this.handle.step=this.opts.scrollStep;var d=this;c(a).bind("mouseup.handlecontainer",function(){clearInterval(f);d.handle.unbind("mouseenter.handlecontainer");c(a).unbind("mouseup.handlecontainer")});this.handle.bind("mouseenter.handlecontainer",function(){clearInterval(f)});var f=setInterval(c.proxy(this.moveHandle,this),this.opts.scrollTimeout)},onArrowsMousedown:function(d){d.preventDefault();this.handle.direction=c(d.target).hasClass("scrollbar-handle-up")?-1:1;this.handle.step=this.opts.scrollStepArrows;c(d.target).addClass("move");var e=setInterval(c.proxy(this.moveHandle,this),this.opts.scrollTimeoutArrows);c(a).one("mouseup.arrows",function(){clearInterval(e);c(d.target).removeClass("move")})},moveHandle:function(){this.handle.top=(this.handle.direction===1)?Math.min(this.handle.top+this.handle.step,this.props.handlePosition.max):Math.max(this.handle.top-this.handle.step,this.props.handlePosition.min);this.handle[0].style.top=this.handle.top+"px";this.setContentPosition()},onContentHover:function(d){if(d.type==="mouseenter"){this.container.addClass("hover");this.handleContainer.addClass("hover")}else{this.container.removeClass("hover");this.handleContainer.removeClass("hover")}},onHandleContainerHover:function(d){if(d.type==="mouseenter"){this.handleArrows.addClass("hover")}else{this.handleArrows.removeClass("hover")}},preventClickBubbling:function(d){d.stopPropagation()}};c.fn.scrollbar.contentHeight=function(e){var f=e.wrapInner("<div/>").find(":first");var d=f.css({overflow:"hidden"}).height();f.replaceWith(f.contents());return d};c.fn.defaultCss=function(d){var e={right:"auto",left:"auto",top:"auto",bottom:"auto",position:"static"};return this.each(function(){var g=c(this);for(var f in d){if(g.css(f)===e[f]){g.css(f,d[f])}}})};c.event.special.mousewheel={setup:function(){if(this.addEventListener){this.addEventListener("mousewheel",c.fn.scrollbar.mouseWheelHandler,false);this.addEventListener("DOMMouseScroll",c.fn.scrollbar.mouseWheelHandler,false)}else{this.onmousewheel=c.fn.scrollbar.mouseWheelHandler}},teardown:function(){if(this.removeEventListener){this.removeEventListener("mousewheel",c.fn.scrollbar.mouseWheelHandler,false);this.removeEventListener("DOMMouseScroll",c.fn.scrollbar.mouseWheelHandler,false)}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});c.fn.scrollbar.mouseWheelHandler=function(i){var g=i||window.event,f=[].slice.call(arguments,1),j=0,h=true,e=0,d=0;i=c.event.fix(g);i.type="mousewheel";if(i.wheelDelta){j=i.wheelDelta/120}if(i.detail){j=-i.detail/3}if(g.axis!==undefined&&g.axis===g.HORIZONTAL_AXIS){d=0;e=-1*j}if(g.wheelDeltaY!==undefined){d=g.wheelDeltaY/120}if(g.wheelDeltaX!==undefined){e=-1*g.wheelDeltaX/120}f.unshift(i,j,e,d);return c.event.handle.apply(this,f)}})(jQuery,document);