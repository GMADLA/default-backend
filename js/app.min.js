$.validator.addMethod("removeUnwantedChars",function(a,b){a=a.replace(/\\/g,"");$(b).val(a);return true},"");$.validator.addMethod("phoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number");$.validator.addMethod("ageValidate",function(k,e){if(k==""){return true}var c=false;if(e.id.match(/^a_/)){c=true}var f,g;if(c){f=18;g=80}else{f=0;g=25}var l=calculateAge(k);var a=true;if(l>=g){a=false}else{if(l<f){a=false}else{var b=k.substring(5,7);var h=k.substring(8,10);var j=k.substring(0,4);var a=(b>0&&b<13&&j>0&&j<32768&&h>0&&h<=(new Date(j,b,0)).getDate())}}return a},function(b,a){return getBirthErr(a.id,a.value)});function getBirthErr(b,p){if(p==""){return true}var e=false;if(b.match(/^a_/)){e=true}var f,h;if(e){f=18;h=80}else{f=0;h=25}var g="You supplied an invalid date of birth";var q="Sorry, but we can only accept applicants under "+h+" years of age in your state";var l="Sorry, but we can only accept applicants over "+f+" years of age in your state";var o=calculateAge(p);var a=true;if(o>=h){g=q;a=false}else{if(o<f){g=l;a=false}else{var c=p.substring(5,7);var j=p.substring(8,10);var k=p.substring(0,4);var a=(c>0&&c<13&&k>0&&k<32768&&j>0&&j<=(new Date(k,c,0)).getDate());if(!a){g="You supplied an invalid date of birth."}}}return g}$.validator.addMethod("notIn",function(a,b,e){if(e.range==undefined||e.range.length<1){return true}var d=e.caseSensitive!=undefined&&e.caseSensitive;for(i=0;i<e.range.length;i++){var c=e.range[i];if(!d){c=c.toLowerCase();a=a.toLowerCase()}if(c==a){return false}}return true});$.validator.addMethod("validatecc",function(f,d,b){if(/[^0-9\-]+/.test(f)){return false}f=f.replace(/\D/g,"");var e=""+f.charAt(0);var a=""+f.charAt(1);var g=""+f.charAt(2);var c=f+a;var h=c+g+f.charAt(3);var k=b.ccType;if(k=="MC"){if(e!="5"||a<"1"||a>"5"||f.length!=16){return false}}else{if(k=="Visa"){if(e!="4"||(f.length!=13&&f.length!=16)){return false}}else{if(k=="AMEX"){if(e!="3"||(a!="4"&&a!="7")||f.length!=15){return false}}else{if(k=="DISC"){if(h!="6011"||f.length!=16){return false}}}}}if(f.length<13||f.length>16){return false}var j=0;for(loc=f.length-2;loc>=0;loc-=2){j+=1*f.charAt(loc+1);tmp=f.charAt(loc)*2;if(tmp>9){j+=1}j+=tmp%10}if(f.length%2>0){j+=1*f.charAt(0)}var l=j%10;if(l>0){return false}else{return true}},"Please enter a valid credit card number.");function composeAge(d){var c=$("#"+d+"_dob_month").val();var a=$("#"+d+"_dob_day").val();var b=$("#"+d+"_dob_year").val();if(c!=""&&a!=""&&b!=""){$("#"+d+"_dob_detail").val(b+"-"+c+"-"+a)}else{$("#"+d+"_dob_detail").val("")}}function switchConfirm(a){var c=$(a).find(".g_input_state").first().val();var b=true;if(isNyDomain){if(c!="NY"){b=confirm("Because you have chosen the state that is not New York, you can get your free quote and apply online from the Globe Life And Accident Insurance Company web site.\n\nClick 'OK' and you will automatically be redirected to Globe Life.");if(b){window.location.href=appSite+"?git="+jsGit+"&orState="+c.toUpperCase();return false}}}else{if(c=="NY"){b=confirm("Because you have chosen the state of New York, you can get your free quote and apply online from the Globe Life Insurance Company of New York web site.\n\nClick 'OK' and you will automatically be redirected to Globe Life Insurance Company of New York.");if(b){window.location.href=nycSite+"?git="+jsGit+"&orState="+c.toUpperCase();return false}}}return b}function validate_choosenum(a){}function validate_namebirth(a){}function validate_appname(a){}function validate_appbirth(a){}function validate_choosequote(a){}function validate_chooseadb(a){}function validate_childchooseadb(a){}function validate_mailingaddress(a){}function validate_relationship(a){}function validate_childrelationship(a){}function validate_beneficiary(a){}function validate_childbeneficiary(a){}function validate_healthquestions(a){}function validate_childhealthquestions(a){}function validate_paymentmodel(a){}function validate_billingaddress(a){}(function($){$.fn.appexec=function(options){this.options=options;this.options.isCurFormA=true;this.options.isAjaxing=false;var self=this;$("#continue-button").click(function(){self.nextStep()});$("#navBack").attr("href","javascript:void(0);").click(function(){self.prevStep()});$("#navNext").attr("href","javascript:void(0);").click(function(){self.nextStep()});$(".new-main-section-holder").on("click",".continue-button",function(e){e.preventDefault();self.nextStep()});$(".new-main-section-holder").on("click",".navBack",function(e){e.preventDefault();self.prevStep()});this.getNextStep=function(){var j=0;var arrTemp=this.options.allStep;for(var i=0;i<arrTemp.length;i++){if(arrTemp[i]==this.options.curStep){j=i}}return arrTemp[j+1]};this.getPrevStep=function(){var j=0;var arrTemp=this.options.allStep;for(var i=0;i<arrTemp.length;i++){if(arrTemp[i]==this.options.curStep){j=i}}return arrTemp[j-1]};this.isLastStep=function(){var j=0;var arrTemp=this.options.allStep;for(var i=0;i<arrTemp.length;i++){if(arrTemp[i]==this.options.curStep){j=i}}return j==(arrTemp.length-1)};this.initFirstStep=function(){$("#continue_button_js").show();$(".continue_button_div").hide();var strNext=this.getNextStep();var strPrev=this.getPrevStep();var contentNext=this.bufferStep(strNext,"nextstep");var contentPrev=this.bufferStep(strPrev,"prevstep");this.ValidateForm(this.options.curStep);this.checkBillmePopup()};this.isPaymentStep=function(tStep){var patt=new RegExp("paymentmodel");return patt.test(tStep)};this.checkBillmePopup=function(){if(this.isPaymentStep(this.options.curStep)){window.onbeforeunload=gmadCallbackOnBeforeUnload}else{window.onbeforeunload=""}};this.nextStep=function(){var _tid=this.options.curStep+"_form";if($("#"+_tid).valid()){if(self.options.submitStep.length>0){for(n=0;n<self.options.submitStep.length;n++){if(self.options.submitStep[n]==self.getNextStep()){$("#"+_tid).submit();return false}}}if(self.isLastStep()){$("#"+_tid).submit();return false}if(this.isPaymentStep(this.options.curStep)){if(ccExecute()){$(".form-submit-wrapper .continue_button").hide();return false}}if(self.isAppname()){$("#"+self.getNextStep()+"_fname_holder1").html($("#"+this.options.curStep+"_fname").val()+"&rsquo;s");$("#"+self.getNextStep()+"_fname_holder2").html($("#"+this.options.curStep+"_fname").val()+"&rsquo;s")}this.nextStepSubmit();$(".continue_button_div").hide();this.scrollToTop()}};this.nextStepSubmit=function(){var _tid=this.options.curStep+"_form";this.slideForm("next");this.options.isAjaxing=true;this.triggerNext("next");jQuery.post("/ajaxnext",$("#"+_tid).serialize(),function(data){self.options.curStep=self.getNextStep();self.gatrack();var result=self.getJson(data);if(result==false){self.slideForm("prev");self.options.curStep=self.getPrevStep();var v=confirm("We experienced a system issue. Please click OK to refresh the page. If the problem persists, please contact us.");window.location.reload();return false}if(result.success){self.confirmForm();if(!result.tls12){checkTlsSupport()}if(!self.isLastStep()){self.createStepDiv(self.getNextStep());$("#"+self.getNextStep()+"_div").html(result.content)}$("#prevstep_left").html($("#curstep_left").html());$("#curstep_left").hide().html($("#nextstep_left").html()).fadeIn(1000);$("#nextstep_left").html(result.left);if(typeof result.allStep!="undefined"){self.options.allStep=result.allStep}self.ValidateForm();if(self.isPaymentStep(self.getPrevStep())){self.bufferStep(self.getPrevStep(),"prevstep")}self.setNavBar();self.options.isAjaxing=false;self.triggerNext("next")}else{if(result.content=="expired"){window.location.href="/gotostart";return false}alert("Form submit fail, Please review your data and try again.");self.slideForm("prev");self.options.curStep=self.getPrevStep()}self.checkBillmePopup()})};this.prevStep=function(){var _tid=this.options.curStep+"_form";var tempStep=self.getPrevStep();var strRequestedStep=tempStep;if(tempStep=="choosenum"||tempStep=="undefined"){strRequestedStep=""}else{this.slideForm("prev")}this.options.isAjaxing=true;this.triggerNext("prev");$.ajax({url:"/ajaxdummyprev",async:true,type:"POST",data:{requestedStep:strRequestedStep}});jQuery.post("/ajaxprev",{},function(data){if(data.success){self.confirmForm();if(!data.tls12){checkTlsSupport()}var tempStep=self.getPrevStep();if(tempStep=="choosenum"||tempStep=="undefined"){window.location.href="/";return false}self.options.curStep=self.getPrevStep();self.gatrack();if(!$("#"+self.getPrevStep()+"_div").length){self.createStepDiv(self.getPrevStep());if(self.getPrevStep()=="choosenum"){}else{$("#"+self.getPrevStep()+"_div").html(data.content)}}$("#nextstep_left").html($("#curstep_left").html());$("#curstep_left").hide().html($("#prevstep_left").html()).fadeIn();$("#prevstep_left").html(data.left);$(".continue_button_div").hide();self.ValidateForm();self.setNavBar();self.options.isAjaxing=false;self.triggerNext("prev")}else{if(data.content=="expired"){window.location.href="/gotostart";return false}self.slideForm("next")}self.checkBillmePopup()},"json")};this.scrollToTop=function(){if($("body").scrollTop()>0){$("body").scrollTop(0)}else{if($("html").scrollTop()>0){$("html").scrollTop(0)}}};this.getCurFormDivId=function(){return this.options.isCurFormA?"curstep_a":"curstep_b"};this.getPreFormDivId=function(){return this.options.isCurFormA?"curstep_b":"curstep_a"};this.confirmForm=function(){this.options.isCurFormA=this.options.isCurFormA?false:true};this.triggerNext=function(direction){if(direction=="next"){if(this.options.isAjaxing){$("#continue-button").hide();$("#continue-button-off").show();$("#form_cover").removeClass("hide").addClass("pending_cover");$(".btn_back_next").hide();$(".choose_quote_form_overlay").show();$(".continue-button").attr("disabled","disabled");$(".continue-button2").attr("disabled","disabled");$("fieldset").attr("disabled","disabled")}else{$(".app_main_page_title").html($(".step").not(".hiddenstep").children(".app_title_section").html());$("#continue-button").show();$("#continue-button-off").hide();$(".btn_back_next").fadeIn();$(".choose_quote_form_overlay").fadeOut();$(".continue-button").removeAttr("disabled");$(".continue-button2").removeAttr("disabled");$("fieldset").removeAttr("disabled");$("#form_cover").removeClass("pending_cover").addClass("hide")}}else{if(this.options.isAjaxing){$("#form_cover").removeClass("hide").addClass("pending_cover");$(".btn_back_next").hide();$(".choose_quote_form_overlay").show();$(".continue-button").attr("disabled","disabled");$(".continue-button2").attr("disabled","disabled");$("fieldset").attr("disabled","disabled")}else{$(".app_main_page_title").html($(".step").not(".hiddenstep").children(".app_title_section").html());$("#form_cover").removeClass("pending_cover").addClass("hide");$(".choose_quote_form_overlay").fadeOut();$(".continue-button").removeAttr("disabled");$(".continue-button2").removeAttr("disabled");$("fieldset").removeAttr("disabled");$(".btn_back_next").fadeIn()}}};this.getJson=function(strData){var isJson=true;var result;try{result=jQuery.parseJSON(strData)}catch(e){isJson=false}if(isJson){return result}else{return false}};this.slideForm=function(direction){var stepRaw=this.options.curStep;var currentStep="#"+this.options.curStep+"_div";if(direction=="next"){var nextStep="#"+this.getNextStep()+"_div";var toggleClass="processed";var removeClass="preprocessed"}else{var nextStep="#"+this.getPrevStep()+"_div";var toggleClass="preprocessed";var removeClass="processed"}$(currentStep).toggleClass(toggleClass).delay(0).queue(function(){$(currentStep).addClass("hiddenstep");$(nextStep).removeClass("hiddenstep");$(this).dequeue()}).delay(5).queue(function(){$(nextStep).removeClass(removeClass).trigger("stepShown");$(currentStep).trigger("stepHidden");$(this).dequeue()})};this.slideFormOld=function(direction){if(direction=="next"){$("#"+this.getPreFormDivId()).html($("#nextstep").html());$("#"+this.getCurFormDivId()).slideUp();$("#"+this.getPreFormDivId()).slideDown()}else{$("#"+this.getPreFormDivId()).html($("#prevstep").html());$("#"+this.getCurFormDivId()).slideUp();$("#"+this.getPreFormDivId()).slideDown()}};this.setNavBar=function(){var curNum=this.options.navBar[self.options.curStep];for(var i=1;i<=this.options.totalBarItem;i++){if(i<curNum){$("#navBar-"+i.toString()).addClass("before-current-group").removeClass("current-group").removeClass("after-current-group")}else{if(i==curNum){$("#navBar-"+i.toString()).removeClass("before-current-group").addClass("current-group").removeClass("after-current-group")}else{$("#navBar-"+i.toString()).removeClass("before-current-group").removeClass("current-group").addClass("after-current-group")}}}};this.gatrack=function(){if(self.options.curStep==undefined){return false}var arrSplit=self.options.curStep.split("_");var strPrefix=arrSplit[0]=="a"?"Adult":"Juv";var strPostfix="";if(arrSplit[2]=="beneficiary"){strPostfix="_Beneficiary"}else{if(arrSplit[2]=="childbeneficiary"){strPostfix="_Beneficiary"}else{if(arrSplit[2]=="appname"){strPostfix="_Get_Quote"}else{if(arrSplit[2]=="appbirth"){strPostfix="_Get_Quote_DOB"}else{if(arrSplit[2]=="namebirth"){strPostfix="_Get_Quote"}else{if(arrSplit[2]=="billingaddress"){strPostfix="_Billing_Address"}else{if(arrSplit[2]=="childhealthquestions"){strPostfix="_Health_Questions"}else{if(arrSplit[2]=="healthquestions"){strPostfix="_Health_Questions"}else{if(arrSplit[2]=="chooseadb"){strPostfix="_Accidental_Death_Benefit_Option"}else{if(arrSplit[2]=="childchooseadb"){strPostfix="_Accidental_Death_Benefit_Option"}else{if(arrSplit[2]=="choosequote"){strPostfix="_Life_Insurance_Quote"}else{if(arrSplit[2]=="paymentmodel"){strPostfix="_Payment"}else{if(arrSplit[2]=="mailingaddress"){strPostfix="_Mailing"}else{if(arrSplit[2]=="relationship"){strPostfix="_Relationship"}else{if(arrSplit[2]=="childrelationship"){strPostfix="_Relationship"}}}}}}}}}}}}}}}ga("send","pageview",strPrefix+strPostfix)};this.createStepDiv=function(strStep){if($("#"+strStep+"_div").length){return false}var stepBefore='<div style="position:relative;" id="'+strStep+'_div" class="step hiddenstep processed"></div>';var stepDiv='<div style="position:relative;" id="'+strStep+'_div" class="step hiddenstep preprocessed"></div>';if(this.determinePosition(strStep)){$("#"+this.options.curStep+"_div").before(stepBefore)}else{$("#"+this.options.curStep+"_div").after(stepDiv)}};this.bufferStep=function(strStep,strStepId){this.createStepDiv(strStep);jQuery.post("/ajaxbuffer","bufferstep="+strStep,function(data){setTimeout(function(){if(data.success){$("#"+strStep+"_div").html(data.content);$("#"+strStepId+"_left").html(data.left)}else{content="error occur when pull buffer page"}},1000)},"json")};this.determinePosition=function(strStep){var m,n;var arrTemp=this.options.allStep;for(var i=0;i<arrTemp.length;i++){if(arrTemp[i]==this.options.curStep){m=i}if(arrTemp[i]==strStep){n=i}}return m>n};this.isAppname=function(){var patt=new RegExp("appname");return patt.test(this.options.curStep)};this.ValidateForm=function(){strStep=this.options.curStep;if(strStep!="choosenum"){var arrTemp=strStep.split("_");var name=arrTemp[2];var method="validate_"+name+"(strStep)";eval(method)}else{return false}};this.initFirstStep();return this}})(jQuery);